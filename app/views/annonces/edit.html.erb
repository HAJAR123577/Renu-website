<div class="container mx-auto px-4 py-8 mt-16">
  <h1 class="text-2xl font-bold mb-6 text-center">Modifier l'annonce</h1>

  <div class="flex flex-col md:flex-row gap-8 items-start">
    <!-- Formulaire à gauche -->
    <div class="w-full md:w-1/2 bg-white p-6 rounded-xl shadow-md flex flex-col h-[540px]">
      <!-- Formulaire avec 'form_with' pour la mise à jour -->
      <%= form_with(model: @annonce, local: true, html: { multipart: true, class: "flex flex-col justify-between h-full" }) do |form| %>
        <div class="space-y-3">
          <div>
            <%= form.label :nom_produit, "Nom du produit", class: "block text-gray-700 font-semibold mb-1 text-sm" %>
            <%= form.text_field :nom_produit, class: "w-full px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" %>
          </div>

          <div>
            <%= form.label :description, class: "block text-gray-700 font-semibold mb-1 text-sm" %>
            <%= form.text_area :description, rows: 2, class: "w-full px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" %>
          </div>

          <div>
            <%= form.label :prix, class: "block text-gray-700 font-semibold mb-1 text-sm" %>
            <%= form.number_field :prix, step: 0.01, class: "w-full px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" %>
          </div>

          <div>
            <%= form.label :date_publication, "Date de publication", class: "block text-gray-700 font-semibold mb-1 text-sm" %>
            <%= form.date_field :date_publication, class: "w-full px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" %>
          </div>

          <div>
            <%= form.label :nom_categorie, "Nom de la catégorie", class: "block text-gray-700 font-semibold mb-1 text-sm" %>
            <%= form.select :nom_categorie, ['Électronique', 'Maison', 'Vêtements', 'Livres', 'Sport'], { prompt: "Sélectionner une catégorie" }, class: "w-full px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" %>
          </div>

          <div>
            <%= form.label :photo, "Photo du produit", class: "block text-gray-700 font-semibold mb-1 text-sm" %>
            <%= form.file_field :photo, class: "w-full px-3 py-2 text-sm border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500" %>
          </div>
        </div>

        <div class="flex justify-center pt-2">
          <%= form.submit "Mettre à jour l'annonce", class: "bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200 text-sm" %>
        </div>
      <% end %>
    </div>

    <!-- Image à droite -->
    <div class="w-full md:w-1/2 sticky top-8">
      <div class="bg-gray-100 rounded-xl overflow-hidden shadow-md h-[500px] flex items-center justify-center">
        <!-- Affichage de l'image existante si présente -->
        <%= image_tag @annonce.photo, class: "object-cover w-full h-full" if @annonce.photo.attached? %>
      </div>
    </div>
  </div>
</div>
